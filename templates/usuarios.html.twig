{% extends "layout.html.twig" %}

{% block content %}
    {% include "navigator.html.twig" %}
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Usuarios</h1>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Informacion de usuarios y permisos
                    </div>
                    <!-- /.panel-heading -->
                    <div class="panel-body">
                        <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
                            <thead>
                                <tr>
                                    <th>Usuario</th>
                                    <th>Nombre</th>
                                    <th>Admin</th>
                                    <th>Carga</th>
                                    <th>Lectura</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in usuarios%}
                                    <tr class="odd gradeX">
                                        <td>{{item.usuario}}</td>
                                        <td>{{item.nombreyapellido}}</td>

                                        <td>
                                            {% if item.admin=='1' %}
                                                {% set value=1 %}{%set claseboton='btn-info' %}{%set clasetilde='fa-check' %}
                                            {% else %} 
                                                {%set value=0 %}{%set claseboton='btn-warning' %}{%set clasetilde='fa-times' %}
                                            {%endif%}
                                            <button type="button" class="btn {{claseboton}} btn-circle" value={{value}} name="A,{{item.usuario}},{{item.admin}}">
                                                <i class="fa {{clasetilde}} fa-check"></i>
                                            </button>
                                        </td>

                                        <td>
                                            {% if item.carga=='1' %}
                                                {% set value=1 %}{%set claseboton='btn-info' %}{%set clasetilde='fa-check' %}
                                            {% else %} 
                                                {%set value=0 %}{%set claseboton='btn-warning' %}{%set clasetilde='fa-times' %}
                                            {%endif%}
                                            <button type="button" class="btn {{claseboton}} btn-circle" value={{value}} name="C,{{item.usuario}},{{item.carga}}">
                                                <i class="fa {{clasetilde}} fa-check"></i>
                                            </button>
                                        </td>
                                        <td>
                                            {% if item.lectura=='1' %}
                                                {% set value=1 %}{%set claseboton='btn-info' %}{%set clasetilde='fa-check' %}
                                            {% else %} 
                                                {%set value=0 %}{%set claseboton='btn-warning' %}{%set clasetilde='fa-times' %}
                                            {%endif%}
                                            <button type="button" class="btn {{claseboton}} btn-circle" value={{value}} name="L,{{item.usuario}},{{item.admin}}">
                                                <i class="fa {{clasetilde}} fa-check"></i>
                                            </button>
                                        </td>

                                        <td><button type="button" class="btn btn-primary" onclick="window.location.href = '{{ path('filtrosgobernador') }}';">Borrar</button>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        <!-- /.table-responsive -->

                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /#wrapper -->



{% endblock %}    

{% block final %}
    <!-- DataTables JavaScript -->
    <script src="{{ asset('/vendor/datatables/js/jquery.dataTables.min.js') }}"></script>
    <script src="{{ asset('/vendor/datatables-plugins/dataTables.bootstrap.min.js') }}"></script>
    <script src="{{ asset('vendor/datatables-responsive/dataTables.responsive.js') }}"></script>
    <script>
                                            $(document).ready(function () {
                                                $('#dataTables-example').DataTable({
                                                    responsive: true
                                                });
                                            });

                                            $(".btn-circle").click(function () {
                                                if (this.value == 1) {
                                                    $.post("{{ path('usuarios',{'accion': 'agregar'}) }}", {'datos': this.name}, function (data, textStatus, jqxhr) {
                                                        // validar retorno
                                                    });
                                                    this.value = 0;
                                                    $(this).attr("class", 'btn btn-warning btn-circle');
                                                    $(this).children().attr("class", "fa fa-times");
                                                } else {
                                                    $.post("{{ path('usuarios',{'accion': 'quitar'}) }}", {'datos': this.name}, function (data, textStatus, jqxhr) {
                                                        //validar retorno
                                                    });
                                                    this.value = 1;
                                                    $(this).attr("class", 'btn btn-info btn-circle');
                                                    $(this).children().attr("class", "fa fa-check");
                                                }
                                            });
    </script>


{% endblock %}


